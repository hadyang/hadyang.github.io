<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:dc="http://purl.org/dc/elements/1.1/" version="1.1" xmlns:xl="http://www.w3.org/1999/xlink" viewBox="-504 511 912 328" width="912" height="328">
  <defs>
    <font-face font-family="Helvetica Neue" font-size="12" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
    <marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" stroke-linejoin="miter" stroke-miterlimit="10" viewBox="-1 -3 7 6" markerWidth="7" markerHeight="6" color="black">
      <g>
        <path d="M 4.8 0 L 0 -1.8 L 0 1.8 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/>
      </g>
    </marker>
    <font-face font-family="Helvetica Neue" font-size="14" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.9958" descent="-212.99744" font-weight="400">
      <font-face-src>
        <font-face-name name="HelveticaNeue"/>
      </font-face-src>
    </font-face>
  </defs>
  <metadata> Produced by OmniGraffle 7.18.5\n2021-05-16 08:39:56 +0000</metadata>
  <g id="Canvas___-2" stroke="none" fill-opacity="1" stroke-opacity="1" stroke-dasharray="none" fill="none">
    <title>事务消息</title>
    <rect fill="white" x="-504" y="511" width="912" height="328"/>
    <g id="Canvas___-2_Flow">
      <title>Flow</title>
      <g id="Graphic_65">
        <path d="M -478 708.2 L -478 613.8 C -478 607.2864 -464.56 602 -448 602 C -431.44 602 -418 607.2864 -418 613.8 L -418 708.2 C -418 714.7136 -431.44 720 -448 720 C -464.56 720 -478 714.7136 -478 708.2" fill="#f3ecc2"/>
        <path d="M -478 708.2 L -478 613.8 C -478 607.2864 -464.56 602 -448 602 C -431.44 602 -418 607.2864 -418 613.8 L -418 708.2 C -418 714.7136 -431.44 720 -448 720 C -464.56 720 -478 714.7136 -478 708.2 M -478 613.8 C -478 620.3136 -464.56 625.6 -448 625.6 C -431.44 625.6 -418 620.3136 -418 613.8" stroke="#091a09" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(-473 659.732)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="16.666" y="11">DB</tspan>
        </text>
      </g>
      <g id="Graphic_66">
        <path d="M -242.25 602 L -175.25 602 C -172.48858 602 -170.25 604.2386 -170.25 607 L -170.25 715 C -170.25 717.7614 -172.48858 720 -175.25 720 L -242.25 720 C -245.01142 720 -247.25 717.7614 -247.25 715 L -247.25 607 C -247.25 604.2386 -245.01142 602 -242.25 602 Z" fill="#fad56e"/>
        <path d="M -242.25 602 L -175.25 602 C -172.48858 602 -170.25 604.2386 -170.25 607 L -170.25 715 C -170.25 717.7614 -172.48858 720 -175.25 720 L -242.25 720 C -245.01142 720 -247.25 717.7614 -247.25 715 L -247.25 607 C -247.25 604.2386 -245.01142 602 -242.25 602 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(-242.25 653.832)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="8.942" y="11">Producer</tspan>
        </text>
      </g>
      <g id="Graphic_69">
        <path d="M 34 602 L 101 602 C 103.76142 602 106 604.2386 106 607 L 106 715 C 106 717.7614 103.76142 720 101 720 L 34 720 C 31.238576 720 29 717.7614 29 715 L 29 607 C 29 604.2386 31.238576 602 34 602 Z" fill="#fad56e"/>
        <path d="M 34 602 L 101 602 C 103.76142 602 106 604.2386 106 607 L 106 715 C 106 717.7614 103.76142 720 101 720 L 34 720 C 31.238576 720 29 717.7614 29 715 L 29 607 C 29 604.2386 31.238576 602 34 602 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(34 653.832)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="15.722" y="11">Broker</tspan>
        </text>
      </g>
      <g id="Line_70">
        <line x1="-170.25" y1="631.5" x2="16.1" y2="631.5" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_71">
        <line x1="29" y1="661" x2="-157.35" y2="661" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_73">
        <line x1="-170.25" y1="690.5" x2="16.1" y2="690.5" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_74">
        <line x1="-247.25" y1="661" x2="-405.1" y2="661" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_75">
        <path d="M -228 720 L -228 801.5051 L -440.5054 801.5051 L -440.5054 732.5141" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_76">
        <path d="M 67.5 720 L 67.5 800.9914 L -189.5 800.9914 L -189.5 732.9" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_77">
        <path d="M -208.75 602 L -208.75 548.75793 L 67.5 548.75793 L 67.5 589.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Graphic_78">
        <path d="M 310.25 621 L 377.25 621 C 380.01142 621 382.25 623.2386 382.25 626 L 382.25 696 C 382.25 698.7614 380.01142 701 377.25 701 L 310.25 701 C 307.48858 701 305.25 698.7614 305.25 696 L 305.25 626 C 305.25 623.2386 307.48858 621 310.25 621 Z" fill="#f3ecc2"/>
        <path d="M 310.25 621 L 377.25 621 C 380.01142 621 382.25 623.2386 382.25 626 L 382.25 696 C 382.25 698.7614 380.01142 701 377.25 701 L 310.25 701 C 307.48858 701 305.25 698.7614 305.25 696 L 305.25 626 C 305.25 623.2386 307.48858 621 310.25 621 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
        <text transform="translate(310.25 653.832)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="5.714" y="11">Consumer</tspan>
        </text>
      </g>
      <g id="Line_79">
        <line x1="106" y1="661" x2="292.35" y2="661" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Line_80">
        <path d="M 106 690.5 L 209.5 690.5 L 209.5 760.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      </g>
      <g id="Graphic_81">
        <rect x="-127.3614" y="619.332" width="102.688" height="24.335999" fill="white"/>
        <text transform="translate(-122.36139 624.332)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">1. Send Half Msg</tspan>
        </text>
      </g>
      <g id="Graphic_82">
        <rect x="-133.20235" y="648.832" width="90.028" height="24.335999" fill="white"/>
        <text transform="translate(-128.20235 653.832)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">2. Half Msg Ok</tspan>
        </text>
      </g>
      <g id="Graphic_83">
        <rect x="-386.1141" y="648.832" width="117.58" height="24.335999" fill="white"/>
        <text transform="translate(-381.1141 653.832)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="8739676e-19" y="11">3. Local Transaction</tspan>
        </text>
      </g>
      <g id="Graphic_84">
        <rect x="-126.86224" y="678.332" width="113.14" height="24.335999" fill="white"/>
        <text transform="translate(-121.86224 683.332)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">4.Commit/Rollback</tspan>
        </text>
      </g>
      <g id="Graphic_85">
        <rect x="181.166" y="715.8209" width="56.668" height="24.335999" fill="white"/>
        <text transform="translate(186.166 720.8209)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="73896445e-20" y="11">Rollback</tspan>
        </text>
      </g>
      <g id="Graphic_86">
        <rect x="158.75385" y="648.832" width="52.468" height="24.335999" fill="white"/>
        <text transform="translate(163.75385 653.832)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="37658765e-20" y="11">Commit</tspan>
        </text>
      </g>
      <g id="Graphic_87">
        <rect x="-141.06952" y="788.8234" width="170.464" height="24.335999" fill="white"/>
        <text transform="translate(-136.06952 793.8234)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">5. Check UnResolve Half Msg</tspan>
        </text>
      </g>
      <g id="Graphic_88">
        <rect x="-416.11616" y="789.3371" width="154.48" height="24.335999" fill="white"/>
        <text transform="translate(-411.11616 794.3371)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">6. Check Transaction State</tspan>
        </text>
      </g>
      <g id="Graphic_89">
        <rect x="-138.0588" y="536.58994" width="116.476" height="24.335999" fill="white"/>
        <text transform="translate(-133.0588 541.58994)" fill="black">
          <tspan font-family="Helvetica Neue" font-size="12" font-weight="400" fill="black" x="0" y="11">7. Commit/Rollback</tspan>
        </text>
      </g>
      <g id="Graphic_90">
        <text transform="translate(309 780)" fill="#596e79">
          <tspan font-family="Helvetica Neue" font-size="14" font-weight="400" fill="#596e79" x="0" y="13">@HadYang</tspan>
        </text>
      </g>
    </g>
  </g>
</svg>
